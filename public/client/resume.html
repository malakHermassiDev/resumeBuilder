<!DOCTYPE html>
<html>
  <head>
    <title>Resume</title>
    <link rel="stylesheet" href="resume.css">
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/0e035b9984.js" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/0e035b9984.js" crossorigin="anonymous"></script>
    <!-- styles  -->
    <link rel="stylesheet" href="css/style-register.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="../admin/template//vendors/feather/feather.css">

    <link rel="stylesheet" href="../admin/template/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="../admin/template/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="../admin/template/css/vertical-layout-light/style.css">
  </head>
  <body>
   
    <div class="resume shadow-lg"> 
      <div class="resume_left">
        <div class="resume_content">
          <div class="resume_item resume_info">
            <div class="title">
              <p class="bold"> <span id="name"></span></p>
              <p class="regular">Developer</p>
            </div>
          <!-- <h2>Personal Info</h2> -->
          <ul>
            <li>
              <div class="icon">
                <i class="fas fa-envelope"></i>
              </div>
               <div class="data" id="email"> 
               </div>
              </li>
            <li>
              <div class="icon">
                <i class="fas fa-mobile-alt"></i>
              </div>
               <span class="data" id="phone"></span>
              </li>
            <li>
              <div class="icon">
                <i class="fas fa-map-signs"></i>
              </div>
              <span class="data" id="address"></span>
            </li>
          </ul>
          <div class="resume_item resume_softskills">
            <div class="title">
              <h2 class="bold">Soft Skills</h2>
            </div>
          <ul id="softskills-container"></ul>
          </div> 
          <div class="resume_item resume_hardskills">
            <div class="title">
              <h2 class="bold">Hard Skills</h2>
            </div>
          <ul id="hardskills-container"></ul>
          </div>
          <div class="resume_item resume_languages">
            <div class="title">
              <h2 class="bold">Langauges</h2>
            </div>
          <ul id="languages-container"></ul>
          </div>
          
        </div>
      </div>
      </div>
      <div class="resume_right">
        <div class="resume_item resume_about">
          <div class="title">
            <p class="bold">Summary</p>
          </div>
          <p id="summary"></p>
        </div>
        <div class="resume_item resume_work">
          <div class="title">
            <h2 class="bold">Work Experience</h2>
          </div>
          <ul class="resume_item resume_work" id="work-experience">
          </ul>
        </div>
        
        <div class="resume_item resume_education">
          <div class="title">
            <h2 class="bold">Education</h2>
          </div>
        <ul id="resume_education">
          <!-- <li> 
            <div class="date" id="graduation-date"></div>
            <div  class="info">
              <p class="semi-bold"  id="degree"></p> 
              <p  id="institution"></p><br/>
              
            </div>
          </li> -->
        </ul>
        </div>
</div>
   </div>  
   <div class="row" >
    <div class="col-8 m-auto p-4 ">
      <button id="download-btn" class=" btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn col-3" style="background-color: #8cdbf7  !important; color: white !important;">Download PDF</button>
    <a  class=" col-3 btn btn-block  btn-lg font-weight-medium auth-form-btn" href="index.html" style="background-color: rgb(143, 20, 20) !important; color: white !important;">Home Page</a>
    </div>
  </div> 
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.js"></script>
      <script>
        // Retrieve the form data from localStorage
        const personalInfo = JSON.parse(localStorage.getItem('personalInfo'));
        const education = JSON.parse(localStorage.getItem('education'));
        const workExperience = JSON.parse(localStorage.getItem('workExperience'));
        const softSkillsData = localStorage.getItem('softskills');
        const hardSkillsData = localStorage.getItem('hardSkills');
        const languagesData = localStorage.getItem('languages');
        const summaryData = localStorage.getItem('summaryData');
        
        // Set the value of the summary
        const summaryElement = document.getElementById('summary');
        summaryElement.textContent = summaryData.split('":"')[1].replace('"}' , "");
        
        // Set the values of the resume
        document.querySelector('#name').textContent = personalInfo.name;
        document.querySelector('#email').textContent = personalInfo.email;
        document.querySelector('#phone').textContent = personalInfo.phone;
        document.querySelector('#address').textContent = personalInfo.address;
        // Display soft skills
        const softskillsContainer = document.getElementById('softskills-container');
        if (softSkillsData) {
          const softskills = JSON.parse(softSkillsData);
          softskills.forEach(function(softskill) {
            // Create a new softskills element and append it to the softskillss container
            const softskillsElem = document.createElement('div');
            softskillsElem.className = 'softskills_name';
            softskillsElem.textContent = softskill;
            softskillsContainer.appendChild(softskillsElem);
          });
        }
        //hard skills 
      const hardSkillsContainer = document.getElementById('hardskills-container'); // Corrected ID name
      if (hardSkillsData) {
        const hardSkills = JSON.parse(hardSkillsData); // Use hardSkillsData
        hardSkills.forEach(function(hardSkill) {
          // Create a new hardSkills element and append it to the hardSkills container
          const hardSkillsElem = document.createElement('div');
          hardSkillsElem.className = 'hardSkills_name';
          hardSkillsElem.textContent = hardSkill;
          hardSkillsContainer.appendChild(hardSkillsElem);
        });
      }
      //Languages : 
      const languagesContainer = document.getElementById('languages-container'); // Corrected ID name
      if (languagesData) {
        const languages = JSON.parse(languagesData); // Use languagesData
        languages.forEach(function(language) {
          // Create a new languages element and append it to the languages container
          const languagesElem = document.createElement('div');
          languagesElem.className = 'languages_name';
          languagesElem.textContent = language;
          languagesContainer.appendChild(languagesElem);
        });
      }

        // Display work experience
        const workExperienceList = document.querySelector('#work-experience');
        workExperience.forEach(function(exp) {
          const experienceItem = document.createElement('li');
          experienceItem.innerHTML = `
            <p class="date">${exp.startDate}-${exp.endDate} at ${exp.company}</p> 
            <div class="info">
              <p class="semi-bold">${exp.position}</p> 
              <p>${exp.jobDescription}</p> 
            </div>
          `;
          workExperienceList.appendChild(experienceItem);
        });

        // Display education
        const educationList = document.querySelector('#resume_education');
        education.forEach(function(edu) {
          const educationItem = document.createElement('li');
          educationItem.innerHTML = `
            <p class="date">${edu.graduationDate}</p> 
            <div class="info">
              <p class="semi-bold">${edu.specialty} </p> 
              <p>${edu.school}</p>
            </div>
          `;
          educationList.appendChild(educationItem);
        });
        // "[{\"specialty\":\"Information Technology\",\"school\":\"harvard\",\"graduationDate\":\"2023-10-07\"}]"
      // download :
        var downloadBtn = document.getElementById('download-btn')
        downloadBtn.onclick = DownloadPage
        function DownloadPage(){
          var resume = document.querySelector('.resume');
          html2pdf().from(resume).save()
          // window.print() : for print
        }
        window.addEventListener('load', function() {
          // Delete the data from autre.html when starting a new resume
          // localStorage.removeItem('pagesData');
          // localStorage.removeItem('workExperience');
        });
        
            </script>
  </body>
</html>
